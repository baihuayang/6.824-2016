Test: election after network failure ...
server 0 term 0 not receive hb
server 0 term 1 votefor wait 193ms time
server 0 send vote request to server 2
server 0 send vote request to server 0
server 0 send vote request to server 1
[get vote success] server 0 request with LastLogIndex = -1
[get vote success] server 0 request with LastLogIndex = -1
[back to follower] server 2
[get vote success] server 0 request with LastLogIndex = -1
[back to follower] server 1
OK1?????? from server 0 to server 2 : true
server 0 send vote request to server 2 done
OK1?????? from server 0 to server 1 : true
server 0 send vote request to server 1 done
<sendRequestVote Successed> took 1.80371ms
server 0 get vote from server 1 with rf.term = 1, reply.term = 0
<sendRequestVote Successed> took 2.201989ms
OK1?????? from server 0 to server 0 : true
server 0 send vote request to server 0 done
<sendRequestVote Successed> took 2.097188ms
server 0 votenum = 1
server 0 get vote from server 2 with rf.term = 1, reply.term = 0
server 0 votenum = 2
server 0 term 1 become leader with vote num = 2
server 0 get vote from server 0 with rf.term = 1, reply.term = 1
server 0 votenum = 3
server 0 term 1 become leader with vote num = 3
server 2 term 1 not receive hb
server 2 term 2 votefor wait 206ms time
first heartBeat to 2
first heartBeat to 1
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
server 2 send vote request to server 1
server 2 send vote request to server 2
server 2 send vote request to server 0
[get vote success] server 2 request with LastLogIndex = -1
[back to follower] server 1
[get vote success] server 2 request with LastLogIndex = -1
OK1?????? from server 2 to server 1 : true
server 2 send vote request to server 1 done
[get vote success] server 2 request with LastLogIndex = -1
[back to follower] server 0
[heartBeat: server 0 hb failed] for term is not latest, args.term 1, rf.term 2
<sendRequestVote Successed> took 1.083827ms
server 2 get vote from server 1 with rf.term = 2, reply.term = 1
server 2 votenum = 1
OK1?????? from server 2 to server 0 : true
server 2 send vote request to server 0 done
<sendRequestVote Successed> took 1.318742ms
server 2 get vote from server 0 with rf.term = 2, reply.term = 1
server 2 votenum = 2
server 2 term 2 become leader with vote num = 2
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.678296ms
server 0 term 2 send hb to server 1 done
server 0 become follower from leader
OK1?????? from server 2 to server 2 : true
server 2 send vote request to server 2 done
<sendRequestVote Successed> took 1.698364ms
server 2 get vote from server 2 with rf.term = 2, reply.term = 2
server 2 votenum = 3
server 2 term 2 become leader with vote num = 3
[heartBeat: server 0 hb failed] for term is not latest, args.term 1, rf.term 2
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 2.418837ms
server 0 term 2 send hb to server 2 done
server 0 become follower from leader
first heartBeat to 0
server 2 term 2 send hb to server 0 and rf.status = 2
first heartBeat to 1
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 0 term 2 receive hb
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.215431ms
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.052431ms
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 1 and rf.status = 2
server 2 term 2 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 2 receive hb] chan sending
[heartBeat: server 0 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
server 0 term 2 receive hb
server 0 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.072193ms
server 2 term 2 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.120284ms
server 2 term 2 send hb to server 0 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
server 0 term 2 receive hb
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 916.191µs
server 2 term 2 send hb to server 0 done
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.091001ms
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
server 0 term 2 receive hb
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.185239ms
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.410984ms
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 0 term 2 receive hb
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.440988ms
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.249723ms
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
server 0 term 2 receive hb
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 979.861µs
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 952.076µs
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 1 and rf.status = 2
server 2 term 2 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
server 0 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 893.23µs
server 2 term 2 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.133463ms
server 2 term 2 send hb to server 0 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
server 0 term 2 receive hb
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 849.176µs
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 938.852µs
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
[heartBeat: server 1 term 2 receive hb] chan sending
server 0 become a follower
server 1 become a follower
server 0 term 2 receive hb
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.243919ms
server 2 term 2 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.405404ms
server 2 term 2 send hb to server 0 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
server 0 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.241028ms
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.292862ms
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
server 0 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.030881ms
server 2 term 2 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.206998ms
server 2 term 2 send hb to server 0 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
server 0 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 998.082µs
server 2 term 2 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.018073ms
server 2 term 2 send hb to server 0 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
server 0 term 2 receive hb
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 834.85µs
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 921.538µs
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 0 term 2 receive hb
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.22858ms
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.425785ms
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 1 and rf.status = 2
server 2 term 2 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 2.422578ms
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
server 2 term 2 send hb to server 1 done
server 0 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.133093ms
server 2 term 2 send hb to server 0 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 0 term 2 receive hb
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.065702ms
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 984.701µs
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
server 0 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 916.011µs
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 897.986µs
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
server 0 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.058068ms
server 2 term 2 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.288645ms
server 2 term 2 send hb to server 0 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
server 0 term 2 receive hb
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 990.778µs
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.007698ms
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
server 0 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 945.382µs
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.111096ms
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 0 term 2 receive hb
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.065682ms
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.014113ms
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 849.483µs
server 2 term 2 send hb to server 0 done
server 0 term 2 receive hb
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 980.877µs
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 0 term 2 receive hb
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.000116ms
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 893.083µs
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 2 receive hb] chan sending
server 0 term 2 receive hb
server 1 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 929.69µs
server 1 term 2 receive hb
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.069215ms
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 1 and rf.status = 2
server 2 term 2 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
server 0 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.083963ms
server 2 term 2 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.156555ms
server 2 term 2 send hb to server 0 done
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 2 receive hb] chan sending
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 0 become a follower
server 1 term 2 receive hb
server 0 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.163162ms
server 2 term 2 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.069448ms
server 2 term 2 send hb to server 1 done
server 2 term 2 send hb to server 1 and rf.status = 2
server 2 term 2 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
server 1 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 829.519µs
server 2 term 2 send hb to server 1 done
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
server 0 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.128961ms
server 2 term 2 send hb to server 0 done
server 2 term 2 send hb to server 1 and rf.status = 2
server 2 term 2 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 2 receive hb] chan sending
server 1 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 784.835µs
server 2 term 2 send hb to server 1 done
server 1 term 2 receive hb
[heartBeat: server 0 term 2 receive hb] chan sending
server 0 become a follower
server 0 term 2 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.039173ms
server 2 term 2 send hb to server 0 done
[CheckOneLeader] server 0 is not leader
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is leader
leader is 2 
leader is going to disconnect!!!
leader is disconnected!!!
server 2 term 2 send hb to server 0 and rf.status = 2
server 2 term 2 send hb to server 1 and rf.status = 2
server 1 term 2 not receive hb
server 1 term 3 votefor wait 202ms time
server 1 send vote request to server 2
server 1 send vote request to server 1
server 1 send vote request to server 0
[get vote success] server 1 request with LastLogIndex = -1
[get vote success] server 1 request with LastLogIndex = -1
[back to follower] server 0
OK1?????? from server 1 to server 1 : true
server 1 send vote request to server 1 done
<sendRequestVote Successed> took 1.479814ms
server 1 get vote from server 1 with rf.term = 3, reply.term = 3
server 1 votenum = 1
OK1?????? from server 1 to server 0 : true
server 1 send vote request to server 0 done
<sendRequestVote Successed> took 1.359391ms
server 1 get vote from server 0 with rf.term = 3, reply.term = 2
server 1 votenum = 2
server 1 term 3 become leader with vote num = 2
server 0 term 3 not receive hb
server 0 term 4 votefor wait 271ms time
server 0 send vote request to server 2
server 0 send vote request to server 1
server 0 send vote request to server 0
[get vote success] server 0 request with LastLogIndex = -1
OK1?????? from server 0 to server 0 : true
server 0 send vote request to server 0 done
<sendRequestVote Successed> took 1.203821ms
server 0 get vote from server 0 with rf.term = 4, reply.term = 4
server 0 votenum = 1
[get vote success] server 0 request with LastLogIndex = -1
[back to follower] server 1
OK1?????? from server 0 to server 1 : true
server 0 send vote request to server 1 done
<sendRequestVote Successed> took 1.835692ms
server 0 get vote from server 1 with rf.term = 4, reply.term = 3
server 0 votenum = 2
server 0 term 4 become leader with vote num = 2
[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 1 is not leader
[STEP 1]
recover disconnected leader 2 but now may not be a leader
server 2 disconnected last 500.619846ms time[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is leader
[STEP 2]
0 1 have been disconnected
[heartBeat failed from 2 to 2] <sendAppendEntries Failed> took 1.300363183s
server 2 term 2 send hb to server 0 and rf.status = 2
--- FAIL: TestReElection (3.50s)
    config.go:315: expected no leader, but 2 claims to be leader
FAIL
exit status 1
FAIL	raft	3.506s

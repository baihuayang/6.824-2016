Test: election after network failure ...
server 0 term 0 not receive hb
server 0 term 1 votefor wait 241ms time
server 0 send vote request to server 2
server 0 send vote request to server 1
server 0 send vote request to server 0
server 1 term 0 not receive hb
server 1 term 1 votefor wait 242ms time
server 1 send vote request to server 2
server 1 send vote request to server 0
[get vote success] server 0 request with LastLogIndex = -1
[back to follower] server 2
[get vote success] server 1 request with LastLogIndex = -1
OK1?????? from server 0 to server 2 : true
server 0 send vote request to server 2 done
<sendRequestVote Successed> took 2.273264ms
server 0 get vote from server 2 with rf.term = 1, reply.term = 0
server 0 votenum = 1
OK1?????? from server 1 to server 0 : true
server 1 send vote request to server 0 done
<sendRequestVote Successed> took 1.03898ms
server 1 get vote from server 0 with rf.term = 1, reply.term = 1
server 1 votenum = 1
server 1 send vote request to server 1
[get vote success] server 0 request with LastLogIndex = -1
[get vote failed 3] server 1 args.term 1 vote for server 1 rf.currentTerm 1 request with LastLogIndex = -1 and votor votedFor = 0
[get vote failed 3] server 1 args.term 1 vote for server 2 rf.currentTerm 1 request with LastLogIndex = -1 and votor votedFor = 0
OK1?????? from server 0 to server 1 : true
server 0 send vote request to server 1 done
OK1?????? from server 1 to server 1 : true
server 1 send vote request to server 1 done
<sendRequestVote Successed> took 757.784µs
server 1 get reply term = 0, voteGranted = false
<sendRequestVote Successed> took 3.068836ms
server 0 get vote from server 1 with rf.term = 1, reply.term = 1
OK1?????? from server 1 to server 2 : true
server 1 send vote request to server 2 done
<sendRequestVote Successed> took 2.337892ms
server 1 get reply term = 0, voteGranted = false
server 0 votenum = 2
server 0 term 1 become leader with vote num = 2
[get vote failed 3] server 0 args.term 1 vote for server 0 rf.currentTerm 1 request with LastLogIndex = -1 and votor votedFor = 1
OK1?????? from server 0 to server 0 : true
server 0 send vote request to server 0 done
<sendRequestVote Successed> took 3.66829ms
server 0 get reply term = 0, voteGranted = false
first heartBeat to 2
server 0 term 1 send hb to server 2 and rf.status = 2
first heartBeat to 1
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.828095ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 2.103123ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 891.91µs
server 0 term 1 send hb to server 2 done
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.158977ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 882.384µs
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.022702ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.016458ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 947.527µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.013362ms
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.298045ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.12802ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.128164ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 876.666µs
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.026788ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.309661ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.183732ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 933.327µs
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.245421ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.161886ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.237755ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.00527ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 998.831µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.322887ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.35688ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 793.378µs
server 0 term 1 send hb to server 2 done
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.11223ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 865.253µs
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.072443ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.09576ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 848.709µs
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.046878ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.153025ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 2 term 1 receive hb
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 814.27µs
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 967.879µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 852.451µs
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 971.371µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.137171ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.241448ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 827.743µs
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 894.313µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 779.145µs
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 915.756µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.029585ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.258334ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.167688ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.168411ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.070608ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.348513ms
server 0 term 1 send hb to server 1 done
[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is not leader
leader is 0 
leader is going to disconnect!!!
leader is disconnected!!!
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 not receive hb
server 2 term 2 votefor wait 190ms time
server 2 send vote request to server 2
server 2 send vote request to server 1
[get vote success] server 2 request with LastLogIndex = -1
[back to follower] server 1
OK1?????? from server 2 to server 1 : true
server 2 send vote request to server 1 done
<sendRequestVote Successed> took 1.00273ms
[get vote success] server 2 request with LastLogIndex = -1
OK1?????? from server 2 to server 2 : true
server 2 send vote request to server 2 done
<sendRequestVote Successed> took 1.389246ms
server 2 get vote from server 2 with rf.term = 2, reply.term = 2
server 2 votenum = 1
server 2 send vote request to server 0
server 2 get vote from server 1 with rf.term = 2, reply.term = 1
server 2 votenum = 2
server 2 term 2 become leader with vote num = 2
server 1 term 2 not receive hb
server 1 term 3 votefor wait 221ms time
server 1 send vote request to server 2
server 1 send vote request to server 1
server 1 send vote request to server 0
[get vote success] server 1 request with LastLogIndex = -1
[back to follower] server 2
[get vote success] server 1 request with LastLogIndex = -1
OK1?????? from server 1 to server 2 : true
server 1 send vote request to server 2 done
<sendRequestVote Successed> took 1.073985ms
server 1 get vote from server 2 with rf.term = 3, reply.term = 2
server 1 votenum = 1
OK1?????? from server 1 to server 1 : true
server 1 send vote request to server 1 done
<sendRequestVote Successed> took 1.113057ms
server 1 get vote from server 1 with rf.term = 3, reply.term = 3
server 1 votenum = 2
server 1 term 3 become leader with vote num = 2
[CheckOneLeader] server 1 is leader
[CheckOneLeader] server 2 is not leader
[STEP 1]
recover disconnected leader 0 but now may not be a leader
server 0 disconnected last 500.322968ms time[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 1 is leader
[CheckOneLeader] server 2 is not leader
[STEP 2]
1 2 have been disconnected
[heartBeat failed from 0 to 0] <sendAppendEntries Failed> took 2.996631094s
server 0 term 1 send hb to server 1 and rf.status = 2
--- FAIL: TestReElection (3.50s)
    config.go:315: expected no leader, but 0 claims to be leader
FAIL
exit status 1
FAIL	raft	3.505s

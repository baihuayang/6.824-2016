Test: election after network failure ...
server 2 term 0 not receive hb
server 2 term 1 votefor wait 171ms time
server 2 send vote request to server 0
server 2 send vote request to server 1
server 2 send vote request to server 2
[get vote success] server 2 request with LastLogIndex = -1
[back to follower] server 0
[get vote success] server 2 request with LastLogIndex = -1
OK1?????? from server 2 to server 0 : true
server 2 send vote request to server 0 done
<sendRequestVote Successed> took 2.127562ms
server 2 get vote from server 0 with rf.term = 1, reply.term = 0
server 2 votenum = 1
[get vote success] server 2 request with LastLogIndex = -1
[back to follower] server 1
OK1?????? from server 2 to server 2 : true
server 2 send vote request to server 2 done
<sendRequestVote Successed> took 2.078931ms
server 2 get vote from server 2 with rf.term = 1, reply.term = 1
server 2 votenum = 2
server 2 term 1 become leader with vote num = 2
OK1?????? from server 2 to server 1 : true
server 2 send vote request to server 1 done
<sendRequestVote Successed> took 2.353786ms
server 2 get vote from server 1 with rf.term = 1, reply.term = 0
server 2 votenum = 3
server 2 term 1 become leader with vote num = 3
first heartBeat to 0
server 2 term 1 send hb to server 0 and rf.status = 2
first heartBeat to 1
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.707573ms
server 2 term 1 send hb to server 0 done
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.80721ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.123877ms
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.144125ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.204595ms
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.253049ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 862.773µs
server 2 term 1 send hb to server 0 done
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.076068ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 0 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.083466ms
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.069971ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 0 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.073307ms
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 950.246µs
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.02895ms
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 980.91µs
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 773.158µs
server 2 term 1 send hb to server 1 done
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 814.114µs
server 2 term 1 send hb to server 0 done
server 0 term 1 receive hb
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 870.385µs
server 2 term 1 send hb to server 0 done
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.68493ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.107048ms
server 2 term 1 send hb to server 0 done
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.386014ms
server 2 term 1 send hb to server 1 done
server 0 term 1 receive hb
server 1 term 1 receive hb
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.089857ms
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.234935ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 890.715µs
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.110527ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 899.385µs
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.04802ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 940.26µs
server 2 term 1 send hb to server 1 done
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.214563ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 0 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 947.294µs
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.155315ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 0 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 855.502µs
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.030068ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 908.897µs
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.1042ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 0 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 732.588µs
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 874.389µs
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 1 term 1 receive hb
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 947.59µs
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.131484ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 833.668µs
server 2 term 1 send hb to server 1 done
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.153179ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.084526ms
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.235113ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 0 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.019227ms
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.080002ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.171986ms
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.253412ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 945.22µs
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.123013ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 1 term 1 receive hb
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.341696ms
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.210001ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.060094ms
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.233783ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 866.255µs
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 893.648µs
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 1 term 1 receive hb
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.103557ms
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.278795ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.043067ms
server 2 term 1 send hb to server 0 done
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.045486ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 0 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.172368ms
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.403452ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 821.666µs
server 2 term 1 send hb to server 0 done
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.112458ms
server 2 term 1 send hb to server 1 done
[CheckOneLeader] server 0 is not leader
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is leader
leader is 2 
leader is going to disconnect!!!
leader is disconnected!!!
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
server 1 term 1 not receive hb
server 1 term 2 votefor wait 198ms time
server 1 send vote request to server 1
server 1 send vote request to server 0
server 1 send vote request to server 2
[get vote success] server 1 request with LastLogIndex = -1
[back to follower] server 0
[get vote success] server 1 request with LastLogIndex = -1
OK1?????? from server 1 to server 0 : true
server 1 send vote request to server 0 done
<sendRequestVote Successed> took 1.066171ms
server 1 get vote from server 0 with rf.term = 2, reply.term = 1
server 1 votenum = 1
OK1?????? from server 1 to server 1 : true
server 1 send vote request to server 1 done
<sendRequestVote Successed> took 1.359306ms
server 1 get vote from server 1 with rf.term = 2, reply.term = 2
server 1 votenum = 2
server 1 term 2 become leader with vote num = 2
server 0 term 2 not receive hb
server 0 term 3 votefor wait 203ms time
server 0 send vote request to server 2
server 0 send vote request to server 0
server 0 send vote request to server 1
[get vote success] server 0 request with LastLogIndex = -1
[get vote success] server 0 request with LastLogIndex = -1
[back to follower] server 1
OK1?????? from server 0 to server 0 : true
server 0 send vote request to server 0 done
<sendRequestVote Successed> took 1.18331ms
server 0 get vote from server 0 with rf.term = 3, reply.term = 3
server 0 votenum = 1
OK1?????? from server 0 to server 1 : true
server 0 send vote request to server 1 done
<sendRequestVote Successed> took 1.301794ms
server 0 get vote from server 1 with rf.term = 3, reply.term = 2
server 0 votenum = 2
server 0 term 3 become leader with vote num = 2
[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 1 is not leader
[STEP 1]
recover disconnected leader 2 but now may not be a leader
server 2 disconnected last 500.824604ms time[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is leader
[STEP 2]
0 1 have been disconnected
[heartBeat failed from 2 to 2] <sendAppendEntries Failed> took 2.487258199s
server 2 term 1 send hb to server 0 and rf.status = 2
--- FAIL: TestReElection (3.50s)
    config.go:315: expected no leader, but 2 claims to be leader
FAIL
exit status 1
FAIL	raft	3.506s

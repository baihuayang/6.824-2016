Test: election after network failure ...
server 0 term 0 not receive hb
server 0 term 1 votefor wait 161ms time
server 0 send vote request to server 2
server 0 send vote request to server 0
server 0 send vote request to server 1
[get vote success] server 0 request with LastLogIndex = -1
[back to follower] server 2
OK1?????? from server 0 to server 2 : true
server 0 send vote request to server 2 done
<sendRequestVote Successed> took 1.667905ms
server 0 get vote from server 2 with rf.term = 1, reply.term = 0
server 0 votenum = 1
[get vote success] server 0 request with LastLogIndex = -1
[get vote success] server 0 request with LastLogIndex = -1
[back to follower] server 1
OK1?????? from server 0 to server 0 : true
server 0 send vote request to server 0 done
<sendRequestVote Successed> took 2.163434ms
server 0 get vote from server 0 with rf.term = 1, reply.term = 1
server 0 votenum = 2
server 0 term 1 become leader with vote num = 2
OK1?????? from server 0 to server 1 : true
server 0 send vote request to server 1 done
<sendRequestVote Successed> took 2.33363ms
server 0 get vote from server 1 with rf.term = 1, reply.term = 0
server 0 votenum = 3
server 0 term 1 become leader with vote num = 3
first heartBeat to 1
server 0 term 1 send hb to server 1 and rf.status = 2
first heartBeat to 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.590704ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.842279ms
server 0 term 1 send hb to server 1 done
server 2 term 1 receive hb
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.067228ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.025593ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.039928ms
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.131338ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.183952ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.336494ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.199271ms
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.305836ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.285459ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.236151ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 880.821µs
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.032374ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.125273ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.087658ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 2 term 1 receive hb
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 866.858µs
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.082616ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.078065ms
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.155689ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.921931ms
server 0 term 1 send hb to server 2 done
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 3.81751ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.013919ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.114435ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.333293ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.278188ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 957.754µs
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 980.362µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.007711ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.056213ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 870.845µs
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.072913ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.33862ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.251544ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.152345ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.457879ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.004141ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 942.517µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.022336ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 983.28µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.137078ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.164223ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.141613ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.098773ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
server 2 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.088967ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.403811ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 603.062µs
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 620.495µs
server 0 term 1 send hb to server 1 done
server 2 term 1 receive hb
server 1 term 1 receive hb
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 875.977µs
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 960.869µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 869.411µs
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.020278ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.377591ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.268838ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 774.853µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 565.036µs
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
server 2 term 1 receive hb
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.023983ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.371968ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.004986ms
server 0 term 1 send hb to server 2 done
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.122752ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 914.677µs
server 0 term 1 send hb to server 2 done
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.033549ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.029078ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.285418ms
server 0 term 1 send hb to server 2 done
[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is not leader
leader is 0 
leader is going to disconnect!!!
leader is disconnected!!!
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat failed from 0 to 0] <sendAppendEntries Failed> took 232.343285ms
server 0 term 1 send hb to server 2 and rf.status = 2
server 1 term 1 not receive hb
server 1 term 2 votefor wait 247ms time
server 1 send vote request to server 0
server 1 send vote request to server 1
server 1 send vote request to server 2
[get vote success] server 1 request with LastLogIndex = -1
[get vote success] server 1 request with LastLogIndex = -1
[back to follower] server 2
OK1?????? from server 1 to server 1 : true
server 1 send vote request to server 1 done
<sendRequestVote Successed> took 954.5µs
server 1 get vote from server 1 with rf.term = 2, reply.term = 2
server 1 votenum = 1
OK1?????? from server 1 to server 2 : true
server 1 send vote request to server 2 done
<sendRequestVote Successed> took 1.11459ms
server 1 get vote from server 2 with rf.term = 2, reply.term = 1
server 1 votenum = 2
server 1 term 2 become leader with vote num = 2
server 2 term 2 not receive hb
server 2 term 3 votefor wait 268ms time
server 2 send vote request to server 2
server 2 send vote request to server 1
server 2 send vote request to server 0
[get vote success] server 2 request with LastLogIndex = -1
[back to follower] server 1
[get vote success] server 2 request with LastLogIndex = -1
OK1?????? from server 2 to server 1 : true
server 2 send vote request to server 1 done
<sendRequestVote Successed> took 1.059849ms
server 2 get vote from server 1 with rf.term = 3, reply.term = 2
server 2 votenum = 1
OK1?????? from server 2 to server 2 : true
server 2 send vote request to server 2 done
<sendRequestVote Successed> took 1.368835ms
server 2 get vote from server 2 with rf.term = 3, reply.term = 3
server 2 votenum = 2
server 2 term 3 become leader with vote num = 2
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is leader
[STEP 1]
recover disconnected leader 0 but now may not be a leader
server 0 disconnected last 500.72329ms time[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is leader
[STEP 2]
2 0 have been disconnected
OK1?????? from server 2 to server 0 : false
server 2 send vote request to server 0 done
<sendRequestVote Failed> took 1.328976986s
first heartBeat to 0
server 2 term 3 send hb to server 0 and rf.status = 2
first heartBeat to 1
server 2 term 3 send hb to server 1 and rf.status = 2
[heartBeat failed from 0 to 0] <sendAppendEntries Failed> took 2.68226721s
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat failed from 2 to 2] <sendAppendEntries Failed> took 1.268848995s
server 2 term 3 send hb to server 0 and rf.status = 2
[STEP 3]
[STEP 3] recover server 0
[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 1 is not leader
[STEP 4]
[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is leader
  ... Passed
PASS
ok  	raft	4.508s

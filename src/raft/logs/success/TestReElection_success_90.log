Test: election after network failure ...
server 2 term 0 not receive hb
server 2 term 1 votefor wait 223ms time
server 2 send vote request to server 2
server 2 send vote request to server 0
server 2 send vote request to server 1
[get vote success] server 2 request with LastLogIndex = -1
OK1?????? from server 2 to server 2 : true
server 2 send vote request to server 2 done
<sendRequestVote Successed> took 1.77614ms
server 2 get vote from server 2 with rf.term = 1, reply.term = 1
server 2 votenum = 1
[get vote success] server 2 request with LastLogIndex = -1
[back to follower] server 0
[get vote success] server 2 request with LastLogIndex = -1
[back to follower] server 1
OK1?????? from server 2 to server 0 : true
server 2 send vote request to server 0 done
OK1?????? from server 2 to server 1 : true
server 2 send vote request to server 1 done
<sendRequestVote Successed> took 2.150115ms
server 2 get vote from server 1 with rf.term = 1, reply.term = 0
server 2 votenum = 2
server 2 term 1 become leader with vote num = 2
<sendRequestVote Successed> took 2.275221ms
server 2 get vote from server 0 with rf.term = 1, reply.term = 0
server 2 votenum = 3
server 2 term 1 become leader with vote num = 3
first heartBeat to 1
server 2 term 1 send hb to server 1 and rf.status = 2
first heartBeat to 0
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.269261ms
server 2 term 1 send hb to server 1 done
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.461277ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat: server 0 term 1 receive hb] chan sending
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.013678ms
server 2 term 1 send hb to server 1 done
server 0 term 1 receive hb
server 0 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.578547ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 765.502µs
server 2 term 1 send hb to server 0 done
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.298387ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
[heartBeat: server 1 term 1 receive hb] chan sending
server 0 term 1 receive hb
server 0 become a follower
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.05277ms
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.143315ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 897.171µs
server 2 term 1 send hb to server 1 done
server 1 term 1 receive hb
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.185803ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.571177ms
server 2 term 1 send hb to server 1 done
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.97214ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 818.172µs
server 2 term 1 send hb to server 0 done
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 987.376µs
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 914.353µs
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.023565ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 0 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.267927ms
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.149606ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.02717ms
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.095364ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.162177ms
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.310865ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.047252ms
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.143061ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 1 term 1 receive hb
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 765.336µs
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 738.373µs
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.185272ms
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.177032ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 0 term 1 receive hb] chan sending
server 1 term 1 receive hb
server 0 become a follower
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.17807ms
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.313144ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.068162ms
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.14432ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 750.593µs
server 2 term 1 send hb to server 0 done
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.012612ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 837.99µs
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 826.387µs
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 0 term 1 receive hb] chan sending
server 1 term 1 receive hb
server 0 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.122079ms
server 2 term 1 send hb to server 1 done
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.563858ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 841.611µs
server 2 term 1 send hb to server 1 done
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 972.122µs
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 0 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.036613ms
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 978.369µs
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 1 term 1 receive hb
server 0 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.188745ms
server 2 term 1 send hb to server 1 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.047105ms
server 2 term 1 send hb to server 0 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 953.906µs
server 2 term 1 send hb to server 0 done
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.157701ms
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
server 0 term 1 receive hb
server 1 term 1 receive hb
server 1 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 828.003µs
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 973µs
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 808.7µs
server 2 term 1 send hb to server 0 done
server 0 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 814.196µs
server 2 term 1 send hb to server 1 done
server 2 term 1 send hb to server 0 and rf.status = 2
server 2 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 0 term 1 receive hb] chan sending
server 0 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 0 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 976.778µs
server 2 term 1 send hb to server 0 done
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 944.457µs
server 2 term 1 send hb to server 1 done
[CheckOneLeader] server 0 is not leader
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is leader
leader is 2 
leader is going to disconnect!!!
leader is disconnected!!!
server 2 term 1 send hb to server 1 and rf.status = 2
server 2 term 1 send hb to server 0 and rf.status = 2
server 0 term 1 not receive hb
server 0 term 2 votefor wait 253ms time
server 0 send vote request to server 2
server 0 send vote request to server 1
server 0 send vote request to server 0
[get vote success] server 0 request with LastLogIndex = -1
[back to follower] server 1
[get vote success] server 0 request with LastLogIndex = -1
OK1?????? from server 0 to server 0 : true
server 0 send vote request to server 0 done
OK1?????? from server 0 to server 1 : true
server 0 send vote request to server 1 done
<sendRequestVote Successed> took 1.458795ms
server 0 get vote from server 1 with rf.term = 2, reply.term = 1
server 0 votenum = 1
<sendRequestVote Successed> took 1.164671ms
server 0 get vote from server 0 with rf.term = 2, reply.term = 2
server 0 votenum = 2
server 0 term 2 become leader with vote num = 2
server 1 term 2 not receive hb
server 1 term 3 votefor wait 291ms time
server 1 send vote request to server 0
server 1 send vote request to server 1
server 1 send vote request to server 2
[get vote success] server 1 request with LastLogIndex = -1
[back to follower] server 0
[get vote success] server 1 request with LastLogIndex = -1
OK1?????? from server 1 to server 0 : true
server 1 send vote request to server 0 done
<sendRequestVote Successed> took 1.340363ms
server 1 get vote from server 0 with rf.term = 3, reply.term = 2
server 1 votenum = 1
OK1?????? from server 1 to server 1 : true
server 1 send vote request to server 1 done
<sendRequestVote Successed> took 1.385366ms
server 1 get vote from server 1 with rf.term = 3, reply.term = 3
server 1 votenum = 2
server 1 term 3 become leader with vote num = 2
[CheckOneLeader] server 0 is not leader
[CheckOneLeader] server 1 is leader
[STEP 1]
recover disconnected leader 2 but now may not be a leader
server 2 disconnected last 500.697696ms time[heartBeat failed from 2 to 2] <sendAppendEntries Failed> took 971.444835ms
server 2 term 1 send hb to server 0 and rf.status = 2
[heartBeat: server 2 hb failed] for term is not latest, args.term 1, rf.term 3
[heartBeat success from 2 to 2] <sendAppendEntries Failed> took 1.012441ms
server 2 term 1 send hb to server 0 done
server 2 become follower from leader
[CheckOneLeader] server 0 is not leader
[CheckOneLeader] server 1 is leader
[CheckOneLeader] server 2 is not leader
[STEP 2]
1 2 have been disconnected
server 2 term 1 not receive hb
server 2 term 2 votefor wait 229ms time
server 2 send vote request to server 2
server 2 send vote request to server 1
server 2 send vote request to server 0
OK1?????? from server 1 to server 2 : false
server 1 send vote request to server 2 done
<sendRequestVote Failed> took 1.15975942s
first heartBeat to 0
server 1 term 3 send hb to server 0 and rf.status = 2
first heartBeat to 2
server 1 term 3 send hb to server 2 and rf.status = 2
[heartBeat failed from 1 to 1] <sendAppendEntries Failed> took 780.316306ms
server 1 term 3 send hb to server 2 and rf.status = 2
[STEP 3]
[STEP 3] recover server 2
[CheckOneLeader] server 0 is not leader
[CheckOneLeader] server 2 is not leader
[CheckOneLeader] server 0 is not leader
[CheckOneLeader] server 2 is not leader
[CheckOneLeader] server 0 is not leader
[CheckOneLeader] server 2 is not leader
OK1?????? from server 2 to server 1 : false
server 2 send vote request to server 1 done
<sendRequestVote Failed> took 3.320517675s
[CheckOneLeader] server 0 is not leader
[CheckOneLeader] server 2 is not leader
OK1?????? from server 2 to server 2 : false
server 2 send vote request to server 2 done
<sendRequestVote Failed> took 4.245629207s
[CheckOneLeader] server 0 is not leader
[CheckOneLeader] server 2 is not leader
[heartBeat failed from 1 to 1] <sendAppendEntries Failed> took 4.431384524s
server 1 term 3 send hb to server 0 and rf.status = 2
[CheckOneLeader] server 0 is not leader
[CheckOneLeader] server 2 is not leader
[CheckOneLeader] server 0 is not leader
[CheckOneLeader] server 2 is not leader
[heartBeat failed from 2 to 2] <sendAppendEntries Failed> took 6.586408553s
OK1?????? from server 2 to server 0 : false
server 2 send vote request to server 0 done
<sendRequestVote Failed> took 5.544608739s
server 2 term 2 not receive hb
server 2 term 3 votefor wait 192ms time
server 2 send vote request to server 2
server 2 send vote request to server 0
server 2 send vote request to server 1
[get vote failed 3] server 2 args.term 3 vote for server 0 rf.currentTerm 3 request with LastLogIndex = -1 and votor votedFor = 1
[get vote success] server 2 request with LastLogIndex = -1
OK1?????? from server 2 to server 0 : true
server 2 send vote request to server 0 done
<sendRequestVote Successed> took 1.189062ms
server 2 get reply term = 0, voteGranted = false
OK1?????? from server 2 to server 2 : true
server 2 send vote request to server 2 done
<sendRequestVote Successed> took 1.444806ms
server 2 get vote from server 2 with rf.term = 3, reply.term = 3
server 2 votenum = 1
[CheckOneLeader] server 0 is not leader
[CheckOneLeader] server 2 is not leader
OK1?????? from server 0 to server 2 : false
server 0 send vote request to server 2 done
<sendRequestVote Failed> took 6.93564446s
[heartBeat failed from 1 to 1] <sendAppendEntries Failed> took 5.049756551s
server 1 term 3 send hb to server 2 and rf.status = 2
server 0 term 3 not receive hb
server 0 term 4 votefor wait 181ms time
server 0 send vote request to server 2
server 0 send vote request to server 1
server 0 send vote request to server 0
[get vote success] server 0 request with LastLogIndex = -1
[get vote success] server 0 request with LastLogIndex = -1
[back to follower] server 2
OK1?????? from server 0 to server 0 : true
server 0 send vote request to server 0 done
<sendRequestVote Successed> took 1.201492ms
server 0 get vote from server 0 with rf.term = 4, reply.term = 4
server 0 votenum = 1
OK1?????? from server 0 to server 2 : true
server 0 send vote request to server 2 done
<sendRequestVote Successed> took 1.510224ms
server 0 get vote from server 2 with rf.term = 4, reply.term = 3
server 0 votenum = 2
server 0 term 4 become leader with vote num = 2
[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 2 is not leader
[STEP 4]
[heartBeat failed from 1 to 1] <sendAppendEntries Failed> took 1.941615532s
server 1 term 3 send hb to server 0 and rf.status = 2
[heartBeat: server 1 hb failed] for term is not latest, args.term 3, rf.term 4
[heartBeat success from 1 to 1] <sendAppendEntries Failed> took 974.844µs
server 1 term 3 send hb to server 0 done
server 1 become follower from leader
[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is not leader
  ... Passed
PASS
ok  	raft	8.513s

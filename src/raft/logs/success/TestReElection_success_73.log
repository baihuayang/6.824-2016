Test: election after network failure ...
server 0 term 0 not receive hb
server 0 term 1 votefor wait 194ms time
server 0 send vote request to server 2
server 0 send vote request to server 0
server 0 send vote request to server 1
[get vote success] server 0 request with LastLogIndex = -1
[back to follower] server 1
[get vote success] server 0 request with LastLogIndex = -1
[back to follower] server 2
[get vote success] server 0 request with LastLogIndex = -1
OK1?????? from server 0 to server 1 : true
server 0 send vote request to server 1 done
<sendRequestVote Successed> took 1.945156ms
OK1?????? from server 0 to server 0 : true
server 0 send vote request to server 0 done
<sendRequestVote Successed> took 2.263598ms
server 0 get vote from server 1 with rf.term = 1, reply.term = 0
server 0 votenum = 1
OK1?????? from server 0 to server 2 : true
server 0 send vote request to server 2 done
<sendRequestVote Successed> took 2.478109ms
server 0 get vote from server 0 with rf.term = 1, reply.term = 1
server 0 votenum = 2
server 0 term 1 become leader with vote num = 2
server 0 get vote from server 2 with rf.term = 1, reply.term = 0
server 0 votenum = 3
server 0 term 1 become leader with vote num = 3
first heartBeat to 2
server 0 term 1 send hb to server 2 and rf.status = 2
first heartBeat to 1
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
[heartBeat: server 1 term 1 receive hb] chan sending
server 2 term 1 receive hb
server 1 become a follower
server 1 term 1 receive hb
server 2 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.380752ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.770573ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 2 term 1 receive hb] chan sending
server 1 term 1 receive hb
server 2 become a follower
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 952.03µs
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.151721ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 757.544µs
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.005838ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.111838ms
server 0 term 1 send hb to server 1 done
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.66688ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 983.389µs
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 965.371µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 906.071µs
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 968.99µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 777.689µs
server 0 term 1 send hb to server 2 done
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.09617ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 853.877µs
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.086381ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 2.069641ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 2.31254ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.15987ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.100895ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 985.872µs
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 969.319µs
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 858.962µs
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.085686ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 2 term 1 receive hb
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.274379ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.331235ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 981.145µs
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.459328ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.031053ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.168844ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.022812ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.08337ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 932.408µs
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.135866ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 1 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.228424ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.19715ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.003144ms
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 962.677µs
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 899.548µs
server 0 term 1 send hb to server 1 done
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.102134ms
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 706.404µs
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 948.205µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 954.272µs
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 894.513µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 855.359µs
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 901.164µs
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 900.261µs
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.115385ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 1 and rf.status = 2
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 869.117µs
server 0 term 1 send hb to server 1 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 872.169µs
server 0 term 1 send hb to server 2 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.079447ms
server 0 term 1 send hb to server 2 done
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.224723ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
server 2 term 1 receive hb
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 925.412µs
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 959.443µs
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 2 term 1 receive hb
server 1 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.206511ms
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.084408ms
server 0 term 1 send hb to server 1 done
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
[heartBeat: server 2 term 1 receive hb] chan sending
server 2 become a follower
[heartBeat: server 1 term 1 receive hb] chan sending
server 1 become a follower
server 1 term 1 receive hb
server 2 term 1 receive hb
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 955.91µs
server 0 term 1 send hb to server 2 done
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 1.248837ms
server 0 term 1 send hb to server 1 done
[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is not leader
leader is 0 
leader is going to disconnect!!!
leader is disconnected!!!
server 0 term 1 send hb to server 2 and rf.status = 2
server 0 term 1 send hb to server 1 and rf.status = 2
server 1 term 1 not receive hb
server 1 term 2 votefor wait 181ms time
server 1 send vote request to server 2
server 1 send vote request to server 1
server 1 send vote request to server 0
[get vote success] server 1 request with LastLogIndex = -1
[get vote success] server 1 request with LastLogIndex = -1
[back to follower] server 2
OK1?????? from server 1 to server 1 : true
server 1 send vote request to server 1 done
<sendRequestVote Successed> took 1.047087ms
server 1 get vote from server 1 with rf.term = 2, reply.term = 2
server 1 votenum = 1
OK1?????? from server 1 to server 2 : true
server 1 send vote request to server 2 done
<sendRequestVote Successed> took 1.372295ms
server 1 get vote from server 2 with rf.term = 2, reply.term = 1
server 1 votenum = 2
server 1 term 2 become leader with vote num = 2
server 2 term 2 not receive hb
server 2 term 3 votefor wait 246ms time
server 2 send vote request to server 2
server 2 send vote request to server 0
server 2 send vote request to server 1
[get vote success] server 2 request with LastLogIndex = -1
OK1?????? from server 2 to server 2 : true
server 2 send vote request to server 2 done
<sendRequestVote Successed> took 994.378µs
server 2 get vote from server 2 with rf.term = 3, reply.term = 3
server 2 votenum = 1
[get vote success] server 2 request with LastLogIndex = -1
[back to follower] server 1
OK1?????? from server 2 to server 1 : true
server 2 send vote request to server 1 done
<sendRequestVote Successed> took 1.018643ms
server 2 get vote from server 1 with rf.term = 3, reply.term = 2
server 2 votenum = 2
server 2 term 3 become leader with vote num = 2
OK1?????? from server 2 to server 0 : false
server 2 send vote request to server 0 done
<sendRequestVote Failed> took 184.731331ms
first heartBeat to 0
server 2 term 3 send hb to server 0 and rf.status = 2
first heartBeat to 1
server 2 term 3 send hb to server 1 and rf.status = 2
[heartBeat: server 1 term 3 receive hb] chan sending
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is leader
[STEP 1]
recover disconnected leader 0 but now may not be a leader
server 0 disconnected last 500.460491ms time[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is leader
[STEP 2]
2 0 have been disconnected
[heartBeat failed from 2 to 2] <sendAppendEntries Failed> took 602.734989ms
server 2 term 3 send hb to server 1 and rf.status = 2
[heartBeat failed from 2 to 2] <sendAppendEntries Failed> took 1.958455406s
server 2 term 3 send hb to server 1 and rf.status = 2
[STEP 3]
[STEP 3] recover server 0
[CheckOneLeader] server 0 is leader
[CheckOneLeader] server 1 is not leader
[STEP 4]
[heartBeat failed from 0 to 0] <sendAppendEntries Failed> took 3.909442338s
server 0 term 1 send hb to server 2 and rf.status = 2
[heartBeat: server 0 hb failed] for term is not latest, args.term 1, rf.term 3
[heartBeat success from 0 to 0] <sendAppendEntries Failed> took 956.836µs
server 0 term 1 send hb to server 2 done
server 0 become follower from leader
[CheckOneLeader] server 0 is not leader
[CheckOneLeader] server 1 is not leader
[CheckOneLeader] server 2 is leader
  ... Passed
PASS
ok  	raft	4.508s
